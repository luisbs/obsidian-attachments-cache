# Settings

The next section explains the supported Settings.

## General Settings

### `Log level`

By default **Log level** is set to `'WARN'` this prevents the package from over-logging into the user console.

Changing the **Log level** to `'INFO'` or `'DEBUG'` will print to the console valuable information of the inner-workings of the plugging, details about why an URL is/isn't cached, etc.

---

### `Cache priority`

The priority affects when the plugin will run in relation to other plugins, by default **Priority** is set to `'NORMAL'`.

> TLDR; if you detect some attachments ignoring cache, change the **Priority** to `'HIGHER'` or _**Cache all posible attachments**_

What this values releated too is the order of the [PostProcessors](https://docs.obsidian.md/Plugins/Editor/Markdown+post+processing), what happens is that in some cases other plugins may run with the same or higher `sortOrder` value than the **AttachmentsCache Plugin**.

The result of that is some attachments not been notice and avoiding been cached.

#### `'LOWER'` or _**Only cache static attachments**_

This mode will only try to cache attachments that are **part of the note content**, ex:

```md
![](https://images.example.net/image1.jpg)
```

But for example if a plugin renderes special elements using **fenced CodeBlocks** they may not be detected by the **AttachmentsCache Plugin**, and the cache will be ignored.

#### `'NORMAL'` or _**Cache majority of attachments**_

This mode will expand `'LOWER'` and try to also cache attachments on views that other plugins generate.

In this case the above example of special elements been rendered will try to cache most plugins artifacts, but it may still not detect somo plugins that make there **PostProcessors** with higher `sortOrder` values.

#### `'HIGHER'` or _**Cache all posible attachments**_

This mode will expand `'NORMAL'` and try to cache most attachments, it may only ignore elements generated by plugins that intentionally try to place there **PostProcessors** as the last ones.

### `Keep special characters`

When this setting is disabled any non-standard character is replaced with an underscore, to prevent problems on a paths.

---

## Overrides Settings

### `URL's ignore param` & `URL's cache param`

> This Settings work if the **Note** has already matched an _enabled cache rule_.

Overrides standar cache rules on a per-link basis, and caches/ignores the attachment.

Both **URL params** can be changed on the **Plugin Settings** by default they are `ignore_file` and `cache_file`, e.g.:

```md
<!-- ignores the next image -->
![](https://example.com/image1.jpg?ignore_file)
<!-- caches the next image -->
![](https://example.com/image2.jpg?cache_file)
```

### `Note's ignore frontmatter attribute` & `Note's cache frontmatter attribute`

> This Settings work if the **Note** has already matched an _enabled cache rule_.

Overrides standar cache rules on a per-note basis, and caches/ignores the note's attachments.

Both **Frontmatter attributes** can be changed on the **Plugin Settings** by default they are `cache_unless` and `cache_from`, e.g.:

```yml
# this params correspond to the Note's Frontmatter
# strings are supported
cache_unless: example.com/images
# arrays are also supported
cache_from: [example.com/photos, images.net/assets]
```

---

## CacheRule configurations

### CacheRule `storage`

By default, attachments are added to the root of your vault.

You can change the attachment location of each vault path individually. The input allows the usage of variables in the path. For example:

From the note `a/b/c/note1.md`, the next variables are available:

- `{notepath}` resolves `a/b/c/note1`
- `{notename}` resolves `note1`
- `{folderpath}` resolves `a/b/c`
- `{foldername}` resolves `c`

From the attachment been stored, the next variables are available:

- `{ext}` like `jpg`, `jpeg`, `pdf` or `mp3` (taken from the url)
<!-- TODO: add `{type}` user-defined extension groups, like `images = jpg,png` -->

Values equivalent to _Obsidian.md_ standard attachment location setting would be:

- `/`: **Vault folder** adds the attachments to the root of your vault.
- `attachments`: **In the folder specified below** adds the attachments to a specified folder.
- `{folderpath}`: **Same folder as current file** adds the attachments to the same folder as the note you added it to.
- `{folderpath}/attachments`: **In subfolder under current folder** adds attachments to a specified folder next to the note you added the attachment to. If it doesn't exist, it's created when you add an attachment.

Other supported examples are:

- `attachments/{notename}`: adds the attachments to the folder `attachments` under a folder with the note name.
- `attachments/{notepath}`: adds the attachments to the folder `attachments` under folders replicating the note path.

### CacheRule `remotes`

<!-- TODO: add description of behavior http/https/<none> -->
